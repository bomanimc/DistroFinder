<head>
	<meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1">      

        <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
        <!--[if lt IE 9]>
          <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
          <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
        <![endif]-->

        <!-- Bootstrap -->
        <link href="bootstrap-3.2.0-dist/css/bootstrap.min.css" rel="stylesheet">

        <!-- Bootstrap Form Helpers -->
        <!--link href="js/BootstrapFormHelpers-master/dist/css/bootstrap-formhelpers.min.css" rel="stylesheet" media="screen"-->

        <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!--[if lt IE 9]>
          <script src="js/html5shiv.js"></script>
          <script src="js/respond.min.js"></script>
        <![endif]-->
    
    </head>
</head>

<div class = "container">
          <br>
        <div class = "row">
          <div class = "col-lg-3 col-centered col-md-offset-4">
            <div>
              <p class="headStyle">Find Your Distros!</p>
            </div>   
          </div>
        </div>
         <br>     
        <div class = "row">
	        <div class="col-xs-3 col-md-offset-2">
	        	<!--label for="post_title">Select A Term</label><br-->  
				<select class="form-control">
				    <option value="one">Fall 2014</option>
				    <option value="two">Winter 2015</option>
				</select>
			</div>

			<div class="col-xs-3">
	        	<!--label for="post_title">Select A Distro Area</label><br-->			  
				<select id="distroIn" class="form-control">
				    <option value="one">Natural Sciences (Area I)</option>
				    <option value="two">Formal Studies (Area II)</option>
				    <option value="three">Social and Behavioral Sciences (Area III)</option>
				    <option value="four">Historical Studies (Area IV)</option>
				    <option value="five">Ethics and Values (Area V)</option>
				    <option value="six">Literature and Fine Arts (Area VI)</option>
				</select>

			</div>
			<div class = "col-xs-3">
				<!--style="padding-top:23px"-->
				<div>
            		<input class="btn btn-large btn-primary" id="submitButton" name="commit" type="submit" value="Submit"/>
            	</div>
          	</div>
		</div>
		<br>
		<div class = "row">
	        <div class="col-md-12" style="">


			</div>
		</div-->
        <br>
        <!--div class = "row">
          <div class = "col-md-3 col-md-offset-1">
            <input class="btn btn-large btn-primary" id="submitButton" name="commit" type="submit" value="Submit"/>
          </div>
        </div-->
      </div>
    </div>

     <script type="text/javascript">
            $(function() {
                $("#submitButton").click(function() {
                	console.log("clicked");

                    var distro = document.getElementById("distroIn").value;
                    var fileN = distro+".txt";
					var text = "";
					var pieces = [];
					$.ajax({
					    url: '/Distros/one.txt',
					    type: 'get',
					    success: function(html) {
					        text = String(html); 
					        parse(text);
					    }
					});

					function parse(text) {
						pieces = text.split(" ");
						var arr = [];
						var courseSubject = [];
						var courseID = [];
						var arrIndex = 0;

						for(var i=0; i < pieces.length; i++) 
						{
							if((i%2)===0)
							{
								courseSubject[arrIndex]=pieces[i];
							}
							else
							{
								courseID[arrIndex]=pieces[i];
								arrIndex++;
							}
						}

					    //var output = new Array(courseSubject, courseID);
						//pieces.forEach(function (line) { arr.push(pieces.split(" ")); })

						//console.log(arr);
						//return arr;
						//var SubjectArray = arr[0];
	                    //var NumberArray = arr[1];

	                    console.log(arr);
	                    console.log(courseID);
	                    console.log(courseID.length);
	                    console.log(courseSubject);
	                    console.log(courseSubject.length);


	                    var allCourses = [];
	                    for (index = 0; index < courseID.length; index++)
	                    {
	                        var subject = courseSubject[index];
	                        var number = courseID[index];
	                         
	                        /**
	                         * HOW TO Make an HTTP Call - GET
	                         */

	                        var urlString = 'http://api.asg.northwestern.edu/courses/?key=qrEZc4xKeF4KCBj2&term=4570&subject='+subject+'&catalog_num='+number;
	   	                        
	                        var counter = 0;
	                        $.ajax({
							    url: urlString,
							    type: 'get',
							    success: function(rsp) {
							        
			                        if(rsp !== [])
			                        {
			                        	for (i = 0; i < rsp.length; i++)
	                    				{
	                    					allCourses.push(rsp[i]);

	                    				}
			                        }

			                        if(counter == (courseID.length - 1))
			                        {
			                        	extractData();
			                        }
			                        counter++;
							    }
							});
	                        
	                    }
	                    
	                    function extractData()
	                    {
	                    	console.log(allCourses);
	                  		allCourses.forEach(function(dic)
	                  		{
		                    	console.log(dic);
		                        var ids = dic.id;
		                        var courseNum = dic.catalog_num;
		                        var starttime = dic.start_time;
		                        var endtime = dic.end_time;
		                        var titles = dic.title;
		                        var instructors= dic.instructor;
		                        var roomnum = dic.room;
		                        var subjects = dic.subject;
		                        var seatsavailable = dic.seats;
		                        var meetingdays = dic.meeting_days;
		                        console.log(endtime);
	                  		});

	                	}
                	}

                });
            });
        </script>